"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[897],{9897:function(e,t,a){a.r(t),a.d(t,{default:function(){return se}});var l=a(6252),i=a(3577);const s={class:"page page--settings container"},r={class:"page__title"},n={class:"u-mb--10"},o={class:"u-mb--10"};function u(e,t,a,u,m,d){const c=(0,l.up)("el-alert"),g=(0,l.up)("tab-main"),p=(0,l.up)("el-tab-pane"),h=(0,l.up)("tab-ssl"),w=(0,l.up)("tab-langs"),b=(0,l.up)("tab-translations"),f=(0,l.up)("el-tabs");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("h1",r,(0,i.zw)(e.$t(e.$route.name)),1),(0,l._)("div",n,[(0,l.Wm)(c,{title:e.$t('To see the changes in the "admin", you need to refresh the page'),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),(0,l._)("div",o,[(0,l.Wm)(c,{title:e.$t('Changes will be displayed on the "website" after the cache is published'),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),(0,l.Wm)(f,{modelValue:e.tabActive,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tabActive=t),onTabChange:t[1]||(t[1]=t=>e.setTabUrlParam()),type:"border-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{label:e.$t("Main Settings"),name:e.TabsEnum.main},{default:(0,l.w5)((()=>[e.tabActive==e.TabsEnum.main?((0,l.wg)(),(0,l.j4)(g,{key:0})):(0,l.kq)("",!0)])),_:1},8,["label","name"]),(0,l.Wm)(p,{label:e.$t("SSL certificates"),name:e.TabsEnum.ssl},{default:(0,l.w5)((()=>[e.tabActive==e.TabsEnum.ssl?((0,l.wg)(),(0,l.j4)(h,{key:0})):(0,l.kq)("",!0)])),_:1},8,["label","name"]),(0,l.Wm)(p,{label:e.$t("Languages"),name:e.TabsEnum.langs},{default:(0,l.w5)((()=>[e.tabActive==e.TabsEnum.langs?((0,l.wg)(),(0,l.j4)(w,{key:0})):(0,l.kq)("",!0)])),_:1},8,["label","name"]),(0,l.Wm)(p,{label:`${e.$t("Translations")} (WEBSITE)`,name:e.TabsEnum.tSite},{default:(0,l.w5)((()=>[e.tabActive==e.TabsEnum.tSite?((0,l.wg)(),(0,l.j4)(b,{key:0,serviceName:e.ServicesEnum.site,langs:e.$langs("site")},null,8,["serviceName","langs"])):(0,l.kq)("",!0)])),_:1},8,["label","name"]),(0,l.Wm)(p,{label:`${e.$t("Translations")} (ADMIN)`,name:e.TabsEnum.tAdmin},{default:(0,l.w5)((()=>[e.tabActive==e.TabsEnum.tAdmin?((0,l.wg)(),(0,l.j4)(b,{key:0,serviceName:e.ServicesEnum.admin,langs:e.$langs("admin")},null,8,["serviceName","langs"])):(0,l.kq)("",!0)])),_:1},8,["label","name"]),(0,l.Wm)(p,{label:`${e.$t("Translations")} (API)`,name:e.TabsEnum.tApi},{default:(0,l.w5)((()=>[e.tabActive==e.TabsEnum.tApi?((0,l.wg)(),(0,l.j4)(b,{key:0,serviceName:e.ServicesEnum.api,langs:e.$langs("admin")},null,8,["serviceName","langs"])):(0,l.kq)("",!0)])),_:1},8,["label","name"])])),_:1},8,["modelValue"])])}a(7658);const m=(0,l._)("div",{class:"u-mb--10"},null,-1),d={class:"u-mb--10"},c=["src"],g={key:0,class:"u-align-center"},p={class:"u-mb--10"},h={class:"u-mb--10"},w={class:"u-mb--10"},b={class:"u-mb--10"},f={class:"u-mb--10"},$={class:"u-mb--10"},v={class:"u-mb--10"},y={class:"u-mb--10"};function _(e,t,a,s,r,n){const o=(0,l.up)("el-alert"),u=(0,l.up)("el-icon-upload-filled"),_=(0,l.up)("el-icon"),k=(0,l.up)("el-upload"),S=(0,l.up)("el-form-item"),W=(0,l.up)("el-descriptions-item"),E=(0,l.up)("el-tag"),U=(0,l.up)("el-button"),C=(0,l.up)("el-descriptions"),V=(0,l.up)("el-collapse-item"),M=(0,l.up)("el-color-picker"),T=(0,l.up)("el-input"),N=(0,l.up)("el-input-number"),L=(0,l.up)("el-collapse"),x=(0,l.up)("el-form"),D=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[m,(0,l.wy)(((0,l.wg)(),(0,l.j4)(x,{class:"form-login","label-position":"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:e.collapseActive,"onUpdate:modelValue":t[0]||(t[0]=t=>e.collapseActive=t),accordion:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{title:e.$t("Images"),name:e.CollapseEnum.images},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{title:e.$t("Favicon will change immediately after saving the settings"),type:"warning","show-icon":"",closable:!1},null,8,["title"]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.imagesMap,((t,a)=>((0,l.wg)(),(0,l.iD)("div",d,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.imagesMap[a],((s,r)=>((0,l.wg)(),(0,l.j4)(C,{direction:"vertical",column:3,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{label:e.DescrImages[a],error:e.errors[`${r}--${a}`]},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("img",{src:t[r]},null,8,c),(0,l.Wm)(k,{ref_for:!0,ref:`images-${a}-${r}`,"auto-upload":!1,limit:1,accept:e.settingsExtends[a].mimeTypes.toString(),onChange:t=>e.selectFileImage(t,{settingName:a,serviceName:r}),onRemove:t=>e.clearFileImage({settingName:a,serviceName:r}),"list-type":"picture"},{default:(0,l.w5)((()=>[e.imagesMapFiles[a][r]?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)(_,{class:"u-mr--5",size:"40"},{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1}),(0,l._)("div",null,(0,i.zw)(e.$t("Select file")),1)]))])),_:2},1032,["accept","onChange","onRemove"])])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(r.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{type:"primary",onClick:t=>e.editSettingFile({settingName:a,serviceName:r})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),256))])))),256))])),_:1},8,["title","name"]),(0,l.Wm)(V,{title:e.$t("Colors"),name:e.CollapseEnum.colors},{default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l.Wm)(o,{title:e.$t('For the "error page" of the website the local colors will be used'),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.colorsMap,((t,a)=>((0,l.wg)(),(0,l.iD)("div",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.colorsMap[a],((s,r)=>((0,l.wg)(),(0,l.j4)(C,{direction:"vertical",column:3,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{label:e.DescrColors[a],error:e.errors[`${r}--${a}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{modelValue:t[r],"onUpdate:modelValue":e=>t[r]=e,size:"large"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(r.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{type:"primary",onClick:l=>e.editSetting({settingName:a,serviceName:r,settingValue:t[r]})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),256))])))),256))])),_:1},8,["title","name"]),(0,l.Wm)(V,{title:e.$t("Code: HTML/CSS/JavaScript/Text"),name:e.CollapseEnum.codeOrText},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.codeOrTextMap,((t,a)=>((0,l.wg)(),(0,l.iD)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.codeOrTextMap[a],((s,r)=>((0,l.wg)(),(0,l.j4)(C,{direction:"vertical",column:3,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{label:e.DescrCodeOrText[a],error:e.errors[`${r}--${a}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[r],"onUpdate:modelValue":e=>t[r]=e,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(r.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{type:"primary",onClick:l=>e.editSetting({settingName:a,serviceName:r,settingValue:t[r]})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),256))])))),256))])),_:1},8,["title","name"]),(0,l.Wm)(V,{title:e.$t("Marketing / SEO"),name:e.CollapseEnum.marketing},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.marketingMap,((t,a)=>((0,l.wg)(),(0,l.iD)("div",b,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.marketingMap[a],((s,r)=>((0,l.wg)(),(0,l.j4)(C,{direction:"vertical",column:3,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{label:e.DescrMarketing[a],error:e.errors[`${r}--${a}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[r],"onUpdate:modelValue":e=>t[r]=e,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(r.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{type:"primary",onClick:l=>e.editSetting({settingName:a,serviceName:r,settingValue:t[r]})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),256))])))),256))])),_:1},8,["title","name"]),(0,l.Wm)(V,{title:e.$t("Backup"),name:e.CollapseEnum.backup},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.backupMap,((t,a)=>((0,l.wg)(),(0,l.iD)("div",f,[(0,l.Wm)(C,{direction:"vertical",column:3,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{label:e.$t("Host"),error:e.errors[`${a}--${e.SettingsEnum.backup}-${e.SettingsBackupEnum.host}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[e.SettingsBackupEnum.host],"onUpdate:modelValue":a=>t[e.SettingsBackupEnum.host]=a,placeholder:"examplehost.com"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"]),(0,l.Wm)(S,{label:e.$t("Login"),error:e.errors[`${a}--${e.SettingsEnum.backup}-${e.SettingsBackupEnum.username}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[e.SettingsBackupEnum.username],"onUpdate:modelValue":a=>t[e.SettingsBackupEnum.username]=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"]),(0,l.Wm)(S,{label:e.$t("Port"),error:e.errors[`${a}--${e.SettingsEnum.backup}-${e.SettingsBackupEnum.port}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{min:0,modelValue:t[e.SettingsBackupEnum.port],"onUpdate:modelValue":a=>t[e.SettingsBackupEnum.port]=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"]),(0,l.Wm)(S,{label:e.$t("Directory path"),error:e.errors[`${a}--${e.SettingsEnum.backup}-${e.SettingsBackupEnum.remoteDir}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[e.SettingsBackupEnum.remoteDir],"onUpdate:modelValue":a=>t[e.SettingsBackupEnum.remoteDir]=a,placeholder:"/home/dir123"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"]),(0,l.Wm)(S,{label:`${e.$t("SSH public key")}. ${e.$t("Clearing this field will generate a new key")}`,error:e.errors[`${a}--${e.SettingsEnum.backup}-${e.SettingsBackupEnum.publicKey}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[e.SettingsBackupEnum.publicKey],"onUpdate:modelValue":a=>t[e.SettingsBackupEnum.publicKey]=a,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"]),(0,l.Wm)(S,{label:e.$t("Public key comment"),error:e.errors[`${a}--${e.SettingsEnum.backup}-${e.SettingsBackupEnum.publicKeyComment}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[e.SettingsBackupEnum.publicKeyComment],"onUpdate:modelValue":a=>t[e.SettingsBackupEnum.publicKeyComment]=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{type:"primary",onClick:t=>e.editSetting({settingName:e.SettingsEnum.backup,serviceName:a,settingValue:e.backupMap[a],isRunInit:!0,isClearAllErrors:!0})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])))),256))])),_:1},8,["title","name"]),(0,l.Wm)(V,{title:e.$t("Server protection"),name:e.CollapseEnum.protector},{default:(0,l.w5)((()=>[(0,l._)("div",$,[(0,l.Wm)(o,{title:e.$t("This setting can completely block access to the admin panel"),type:"error","show-icon":"",closable:!1},null,8,["title"])]),(0,l._)("div",v,[(0,l.Wm)(o,{title:e.$t('If the server "protector" is unavailable, you will not be able to access the admin panel'),type:"error","show-icon":"",closable:!1},null,8,["title"])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.protectorMap,((t,a)=>((0,l.wg)(),(0,l.iD)("div",y,[(0,l.Wm)(C,{direction:"vertical",column:3,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{label:e.$t("Server url that allows / forbids sending requests to the API server"),error:e.errors[`${a}--${e.SettingsEnum.protector}-${e.SettingsProtectorEnum.url}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[e.SettingsProtectorEnum.url],"onUpdate:modelValue":a=>t[e.SettingsProtectorEnum.url]=a,placeholder:"https://url"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"]),(0,l.Wm)(S,{label:e.$t("The key (string) that the server should return in the response if requests to the API server are allowed"),error:e.errors[`${a}--${e.SettingsEnum.protector}-${e.SettingsProtectorEnum.textKey}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{modelValue:t[e.SettingsProtectorEnum.textKey],"onUpdate:modelValue":a=>t[e.SettingsProtectorEnum.textKey]=a,placeholder:e.$t("Any string")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(W,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{type:"primary",onClick:t=>e.editSetting({settingName:e.SettingsEnum.protector,serviceName:a,settingValue:e.protectorMap[a],isClearAllErrors:!0})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])))),256))])),_:1},8,["title","name"])])),_:1},8,["modelValue"])])),_:1})),[[D,e.isLoading]])],64)}var k=a(2244),S=a(7761);let W={[k.Ut.imageAppLogo]:(0,S.$t)("Image logo"),[k.Ut.imageAppFavicon]:(0,S.$t)("Image favicon"),[k.Ut.imageAppPreloader]:(0,S.$t)("Image preloader"),[k.Ut.imageAppDefault]:(0,S.$t)("Image default (If the image does not exist)")},E={[k.Ut.colorBodyBackground]:(0,S.$t)('Background color - "body" tag'),[k.Ut.colorPrimary]:(0,S.$t)("Color primary"),[k.Ut.colorPrimaryInverted]:`${(0,S.$t)("Inverted primary color")} - \n  ${(0,S.$t)("an example would be white letters on the primary background")}`,[k.Ut.colorTextRegular]:(0,S.$t)("Color regular text - an example would be plain black text"),[k.Ut.colorSelectionBackground]:(0,S.$t)("Selection color - background"),[k.Ut.colorSelectionText]:(0,S.$t)("Selection color - text")},U={[k.Ut.headScript]:(0,S.$t)('This JavaScript will be added to the "head" tag'),[k.Ut.headStyles]:(0,S.$t)('This CSS will be added to the "head" tag'),[k.Ut.headerHtml]:(0,S.$t)('This HTML will be added to the "header" tag'),[k.Ut.headerInfoHtml]:(0,S.$t)('Info bar above "header"'),[k.Ut.contentTopHtml]:(0,S.$t)('This HTML will be added after the "header" tag'),[k.Ut.contentBottomHtml]:(0,S.$t)('This HTML will be added before the "footer" tag'),[k.Ut.footerHtml]:(0,S.$t)('This HTML will be added in the "footer" tag')},C=(0,S.$t)('The phrase that will be added at the beginning of the "title" tag'),V={[k.Ut.pageTitlePrefix]:C,[k.Ut.pageTitleSufix]:(0,S.$t)('Phrase that will be added at the end of the "title" tag')};var M;(function(e){e["images"]="images",e["colors"]="colors",e["codeOrText"]="codeOrText",e["marketing"]="marketing",e["backup"]="backup",e["protector"]="protector"})(M||(M={}));var T=(0,l.aZ)({data(){return{settingsExtends:{},imagesMap:{},imagesMapFiles:{},colorsMap:{},codeOrTextMap:{},marketingMap:{},backupMap:{},protectorMap:{},isLoading:!1,errors:{},SettingsEnum:k.Ut,SettingsBackupEnum:k.VO,SettingsProtectorEnum:k.t2,DescrImages:W,DescrColors:E,DescrCodeOrText:U,DescrMarketing:V,collapseActive:"",CollapseEnum:M}},async mounted(){this.isLoading=!0,await this.init(),this.isLoading=!1},methods:{async init(){try{let{settings:e,settingsExtends:t}=await this.$api["settings"].getSettings();this.settingsExtends=t;let a=t=>{let a;for(a in t)for(let t in e[a])this.errors[`${t}--${a}`]=""},l=(t,a)=>{let l;for(l in t){let t;for(t in a[l]||Object.assign(a,{[l]:{}}),e[l]){let i=JSON.parse(JSON.stringify(e[l][t]));a[l][t]=i}}};l(W,this.imagesMap),l(E,this.colorsMap),l(U,this.codeOrTextMap),l(V,this.marketingMap),this.backupMap=e.backup,this.protectorMap=e.protector,a(W),a(E),a(U),a(V);for(let s in this.backupMap)for(let e in this.backupMap[s])this.errors[`${s}--${k.Ut.backup}-${e}`]="";for(let s in this.protectorMap)for(let e in this.protectorMap[s])this.errors[`${s}--${k.Ut.protector}-${e}`]="";let i=()=>{let e;for(e in this.imagesMap){let t;this.imagesMap[e];for(t in this.imagesMap[e])this.imagesMapFiles[e]||(this.imagesMapFiles[e]={}),this.imagesMapFiles[e][t]=null}};i()}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}},async editSetting({settingName:e,serviceName:t,settingValue:a,isRunInit:l=!1,isClearAllErrors:i=!1}){if(!this.isLoading){this.isLoading=!0,i?this.$utils.clearErrors(this.errors,this.errors):this.$utils.clearErrors(this.errors,{[`${t}--${e}`]:""}),this.$utils.clearErrors(this.errors,{[`${t}--${e}`]:""});try{let i=await this.$api["settings"].editSetting({settingName:e,serviceName:t,settingValue:a});i&&(this.$utils.showMessageSuccess({message:this.$t("Changed")}),l&&await this.init())}catch(s){let e=this.$utils.setErrors(this.errors,s.errors);e||this.$utils.showMessageError({message:s.server,errors:s})}finally{this.isLoading=!1}}},async editSettingFile({settingName:e,serviceName:t}){let a=this.imagesMapFiles[e][t];if(!this.isLoading)if(a){this.isLoading=!0,this.$utils.clearErrors(this.errors,{[`${t}--${e}`]:""});try{let l=await this.$api["settings"].editSettingFile({settingName:e,serviceName:t,settingValue:a});l&&(this.$utils.showMessageSuccess({message:this.$t("Changed")}),this.clearFileImage({settingName:e,serviceName:t}),this.$refs[`images-${e}-${t}`][0].clearFiles(),await this.init())}catch(l){let e=this.$utils.setErrors(this.errors,l.errors);e||this.$utils.showMessageError({message:l.server,errors:l})}finally{this.isLoading=!1}}else this.$utils.setErrors(this.errors,{[`${t}--${e}`]:this.$t("File not selected")})},selectFileImage(e,t){let{settingName:a,serviceName:l}=t;this.$utils.clearErrors(this.errors,{[`${l}--${a}`]:""}),this.imagesMapFiles[a][l]=e.raw},clearFileImage({settingName:e,serviceName:t}){this.imagesMapFiles[e][t]=null}}}),N=a(3744);const L=(0,N.Z)(T,[["render",_]]);var x=L;const D={class:"u-mb--10"},z={class:"u-mb--10"},P={class:"u-mb--10"},A={class:"u-mb--10"};function I(e,t,a,s,r,n){const o=(0,l.up)("el-alert"),u=(0,l.up)("el-option"),m=(0,l.up)("el-select"),d=(0,l.up)("el-form-item"),c=(0,l.up)("el-descriptions-item"),g=(0,l.up)("el-tag"),p=(0,l.up)("el-button"),h=(0,l.up)("el-descriptions"),w=(0,l.up)("el-form"),b=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.j4)(w,{class:"form-login","label-position":"top"},{default:(0,l.w5)((()=>[(0,l._)("div",D,[(0,l.Wm)(o,{title:e.$t('For "admin" and "api" you need to set the same parameters'),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),(0,l._)("div",z,[(0,l.Wm)(o,{title:e.$t("Website and admin panel will be displayed in the language you selected in the language switcher"),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),(0,l._)("div",P,[(0,l.Wm)(o,{title:`${e.$t("Texts for the main website, in the admin panel will be displayed in the default language for the main website")}. ${e.$t("For example rating name or label text will be displayed in the default language")}`,type:"warning","show-icon":"",closable:!1},null,8,["title"])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.langsMap,((t,a)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",A,[(0,l.Wm)(h,{direction:"vertical",column:3,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:e.$t("List of languages"),error:e.errors[`${a}--${e.SettingsEnum.langs}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:e.langsMap[a],"onUpdate:modelValue":t=>e.langsMap[a]=t,multiple:"",filterable:"",size:"large"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.langsIso,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.code,label:e.name,value:e.code},{default:(0,l.w5)((()=>[(0,l._)("b",null,"["+(0,i.zw)(e.code)+"]  ",1),(0,l._)("span",null,(0,i.zw)(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(c,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(c,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"primary",onClick:t=>e.editLangs(a)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:e.$t("Default language"),error:e.errors[`${a}--${e.SettingsEnum.langDefault}`]},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:e.langDefaultMap[a],"onUpdate:modelValue":t=>e.langDefaultMap[a]=t,filterable:"",size:"large"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.langsIso,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.code,label:e.name,value:e.code},{default:(0,l.w5)((()=>[(0,l._)("b",null,"["+(0,i.zw)(e.code)+"]  ",1),(0,l._)("span",null,(0,i.zw)(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","error"])])),_:2},1024),(0,l.Wm)(c,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"u-m--5",type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.toUpperCase()),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(c,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"primary",onClick:t=>e.editLangDefault(a)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),[[b,e.isLoading]]))),256))])),_:1})}var K=(0,l.aZ)({data(){return{langsMap:{},langDefaultMap:{},isChanges:!1,isLoading:!1,langsIso:[],errors:{},SettingsEnum:k.Ut}},async mounted(){await this.init()},unmounted(){this.isChanges&&setTimeout((()=>{location.reload()}),200)},methods:{async init(){if(!this.isLoading){this.isLoading=!0;try{let{langsIso:e,settings:t}=await this.$api["settings"].getSettings();this.langsMap=JSON.parse(JSON.stringify(t.langs)),this.langDefaultMap=JSON.parse(JSON.stringify(t.langDefault)),this.langsIso=e;for(let a in this.langsMap)this.errors[`${a}--${k.Ut.langDefault}`]="",this.errors[`${a}--${k.Ut.langs}`]=""}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async editLangDefault(e){if(!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,{[`${e}--${k.Ut.langDefault}`]:""});try{let t=await this.$api["settings"].editSetting({settingName:k.Ut.langDefault,serviceName:e,settingValue:this.langDefaultMap[e]});this.isChanges=!0,t&&this.$utils.showMessageSuccess({message:this.$t("Language changed")})}catch(t){let e=this.$utils.setErrors(this.errors,t.errors);e||this.$utils.showMessageError({message:t.server,errors:t})}finally{this.isLoading=!1}}},async editLangs(e){if(!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,{[`${e}--${k.Ut.langs}`]:""});try{let t=await this.$api["settings"].editSetting({settingName:k.Ut.langs,serviceName:e,settingValue:this.langsMap[e]});this.isChanges=!0,t&&this.$utils.showMessageSuccess({message:this.$t("Language list changed")})}catch(t){let e=this.$utils.setErrors(this.errors,t.errors);e||this.$utils.showMessageError({message:t.server,errors:t})}finally{this.isLoading=!1}}}}});const H=(0,N.Z)(K,[["render",I]]);var B=H;const F={class:"u-mb--10"},j={class:"u-mb--10"},O={class:"u-mb--10"};function Y(e,t,a,s,r,n){const o=(0,l.up)("el-alert"),u=(0,l.up)("el-input"),m=(0,l.up)("el-form-item"),d=(0,l.up)("el-option"),c=(0,l.up)("el-select"),g=(0,l.up)("el-descriptions-item"),p=(0,l.up)("el-button"),h=(0,l.up)("el-descriptions"),w=(0,l.up)("el-form"),b=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.j4)(w,{class:"form-login","label-position":"top"},{default:(0,l.w5)((()=>[(0,l._)("div",F,[(0,l.Wm)(o,{title:e.$t('After replacing the certificates, you must restart the server or container "proxy"'),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),(0,l._)("div",j,[(0,l.Wm)(o,{title:e.$t('Certificates will change for the mode in which the "production" / "development" server is running'),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",O,[(0,l.Wm)(h,{direction:"vertical",column:2,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{label:e.$t("SSL сertificate"),error:e.errors.cert},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:e.cert,"onUpdate:modelValue":t[0]||(t[0]=t=>e.cert=t),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label","error"]),(0,l.Wm)(m,{label:e.$t("SSL private key"),error:e.errors.privateKey},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:e.privateKey,"onUpdate:modelValue":t[1]||(t[1]=t=>e.privateKey=t),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label","error"]),(0,l.Wm)(m,{label:e.$t("For domain"),error:e.errors.serviceName},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{modelValue:e.serviceName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.serviceName=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:e.ServicesEnum.admin,value:e.ServicesEnum.admin},null,8,["label","value"]),(0,l.Wm)(d,{label:e.ServicesEnum.site,value:e.ServicesEnum.site},null,8,["label","value"])])),_:1},8,["modelValue"])])),_:1},8,["label","error"])])),_:1}),(0,l.Wm)(g,{width:"100",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"primary",onClick:t[3]||(t[3]=t=>e.editSslCertificate())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:1})])),_:1})])),_:1})])),[[b,e.isLoading]])])),_:1})}var q=(0,l.aZ)({data(){return{serviceName:"",privateKey:"",cert:"",errors:{privateKey:"",cert:"",serviceName:""},isLoading:!1,ServicesEnum:k.JX}},methods:{async editSslCertificate(){if(!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,this.errors);try{let e=await this.$api["ssl-certificates"].editSslCertificate({cert:this.cert,privateKey:this.privateKey,serviceName:this.serviceName});e&&this.$utils.showMessageSuccess({message:this.$t("SSL certificate has been changed")})}catch(e){let t=this.$utils.setErrors(this.errors,e.errors);t||this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}}}});const R=(0,N.Z)(q,[["render",Y]]);var J=R;const Z={class:"u-mb--10"},Q={class:"u-center"};function X(e,t,a,s,r,n){const o=(0,l.up)("el-button"),u=(0,l.up)("el-table-column"),m=(0,l.up)("el-text"),d=(0,l.up)("el-input"),c=(0,l.up)("el-form-item"),g=(0,l.up)("el-table"),p=(0,l.up)("el-form"),h=(0,l.up)("el-pagination"),w=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(p,{class:"form-login u-mb--10","label-position":"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{class:"u-mb--5",type:"primary",onClick:t[0]||(t[0]=t=>e.createTranslations())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Update list of translations")),1)])),_:1}),(0,l.Wm)(g,{data:e.translations,stripe:"","scrollbar-always-on":!0},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"#",type:"index",index:e.calcNumberRecord},null,8,["index"]),(0,l.Wm)(u,{label:e.$t("Translations")},{default:(0,l.w5)((t=>[(0,l._)("div",Z,[(0,l.Wm)(m,{type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t.row.key),1)])),_:2},1024)]),(0,l.Wm)(c,{error:e.errors[`${t.row.translationId}_text`]},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.langs,((e,a)=>((0,l.wg)(),(0,l.j4)(d,{class:"u-mb--5",modelValue:t.row.text[a],"onUpdate:modelValue":e=>t.row.text[a]=e,style:{width:"100%"},type:"text",name:"translation",size:"small"},{prepend:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256))])),_:2},1032,["error"])])),_:1},8,["label"]),(0,l.Wm)(u,{label:e.$t("Save"),width:"200",align:"center"},{default:(0,l.w5)((t=>[(0,l.Wm)(o,{type:"primary",onClick:a=>e.editText({translationId:t.row.translationId,text:t.row.text})},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("Save")),1)])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])])),_:1})),[[w,e.isLoading]]),(0,l._)("div",Q,[e.pagination.pagesCount>1?((0,l.wg)(),(0,l.j4)(h,{key:0,"page-size":e.pagination.maxRecordsPerPage,layout:"prev, pager, next",total:e.pagination.itemsCount,background:"",onCurrentChange:t[1]||(t[1]=t=>e.changePage(t)),"current-page":e.pagination.page,"onUpdate:current-page":t[2]||(t[2]=t=>e.pagination.page=t)},null,8,["page-size","total","current-page"])):(0,l.kq)("",!0)])],64)}var G=(0,l.aZ)({props:{serviceName:{type:String,required:!0},langs:{type:Object,required:!0}},data(){return{isChanges:!1,isLoading:!1,translations:[],pagination:{page:1,itemsCount:0,maxRecordsPerPage:0,pagesCount:0},errors:{}}},async created(){await this.init()},unmounted(){this.isChanges&&setTimeout((()=>{location.reload()}),200)},methods:{async init(){this.isLoading=!0,await this.getTranslationsPartList(),this.isLoading=!1},async getTranslationsPartList(){try{let{items:e,itemsCount:t,maxRecordsPerPage:a,pagesCount:l,page:i}=await this.$api["translations"].getTranslationsPartList({serviceName:this.serviceName,page:this.pagination.page});this.translations=e,this.pagination={page:i,itemsCount:t,maxRecordsPerPage:a,pagesCount:l}}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}},async editText({translationId:e,text:t}){if(this.isLoading)return;this.isLoading=!0;let a=`${e}_text`;this.$utils.clearErrors(this.errors,{[a]:""});try{await this.$api["translations"].editText({translationId:e,text:t,serviceName:this.serviceName}),this.$utils.showMessageSuccess({message:this.$t("Changed")}),this.isChanges=!0}catch(l){let e={[a]:l.errors?.text},t=this.$utils.setErrors(this.errors,e,!0);t||this.$utils.showMessageError({message:l.server,errors:l})}finally{this.isLoading=!1}},async createTranslations(){if(!this.isLoading){this.isLoading=!0;try{await this.$api["translations"].createTranslations({serviceName:this.serviceName}),await this.changePage(1),this.$utils.showMessageSuccess({message:this.$t("Changed")}),this.isChanges=!0}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async changePage(e){this.isLoading=!0,this.pagination.page=e,await this.getTranslationsPartList(),window.scrollTo({top:0,behavior:"smooth"}),this.isLoading=!1},calcNumberRecord(e){let{maxRecordsPerPage:t,page:a}=this.pagination;return(a-1)*t+(e+1)}}});const ee=(0,N.Z)(G,[["render",X]]);var te,ae=ee;(function(e){e["main"]="main",e["ssl"]="ssl",e["langs"]="langs",e["tSite"]="translations-site",e["tAdmin"]="translations-admin",e["tApi"]="translations-api"})(te||(te={}));var le=(0,l.aZ)({name:"page-settings",components:{TabMain:x,TabLangs:B,TabSsl:J,TabTranslations:ae},data(){return{tabActive:"",ServicesEnum:k.JX,TabsEnum:te}},created(){this.setActiveTab()},methods:{setActiveTab(){let{tab:e}=this.$route.query;this.tabActive=e||te.main},setTabUrlParam(){this.$router.push({query:{tab:[this.tabActive]}})}}});const ie=(0,N.Z)(le,[["render",u]]);var se=ie}}]);
//# sourceMappingURL=897.08f502de.js.map