"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[6],{5006:function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var s=i(6252),r=i(3577);const l={class:"page page--sections container"},a={class:"page__title"};function o(e,t,i,o,n,d){const m=(0,s.up)("el-input"),u=(0,s.up)("el-form-item"),c=(0,s.up)("el-table-column"),w=(0,s.up)("el-button"),h=(0,s.up)("el-table"),p=(0,s.up)("el-form"),g=(0,s.up)("el-input-number"),f=(0,s.up)("el-checkbox"),$=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("h1",a,(0,r.zw)(e.$t(e.$route.name)),1),(0,s.wy)(((0,s.wg)(),(0,s.j4)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,{data:[1]},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((t=>[(0,s.Wm)(u,{error:e.errors.formAdd.name,required:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$langs("site"),((t,i)=>((0,s.wg)(),(0,s.j4)(m,{class:"u-mb--5",modelValue:e.nameNewSection[i],"onUpdate:modelValue":t=>e.nameNewSection[i]=t,placeholder:e.$t("Name")},{prepend:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(i),1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])))),256))])),_:1},8,["error"])])),_:1}),(0,s.Wm)(c,{width:"200"},{default:(0,s.w5)((i=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"primary",onClick:t[0]||(t[0]=t=>e.createSection())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("Add a Section")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),[[$,e.isSendingFormAdd]]),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(h,{data:e.items,stripe:"","scrollbar-always-on":!0},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{label:e.$t("Name"),"min-width":200},{default:(0,s.w5)((t=>[(0,s.Wm)(u,{error:e.errors.formEdit[`${t.row.sectionId}_name`],required:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$langs("site"),((i,l)=>((0,s.wg)(),(0,s.j4)(m,{class:"u-mb--5",modelValue:t.row.name[l],"onUpdate:modelValue":e=>t.row.name[l]=e,size:"small",placeholder:e.$t("Name")},{prepend:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(l),1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])))),256))])),_:2},1032,["error"])])),_:1},8,["label"]),(0,s.Wm)(c,{label:e.$t("Priority"),width:"150"},{default:(0,s.w5)((t=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,{modelValue:t.row.priority,"onUpdate:modelValue":e=>t.row.priority=e,size:"small",placeholder:e.$t("Priority")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024)])),_:1},8,["label"]),(0,s.Wm)(c,{label:e.$t("Hide"),width:"90"},{default:(0,s.w5)((e=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{modelValue:e.row.isHiden,"onUpdate:modelValue":t=>e.row.isHiden=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},8,["label"]),(0,s.Wm)(c,{label:e.$t("Edit"),width:"150"},{default:(0,s.w5)((t=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"primary",onClick:i=>e.editSection(t.row)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("Edit")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1},8,["label"]),(0,s.Wm)(c,{label:e.$t("Delete"),width:"150"},{default:(0,s.w5)((t=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"danger",onClick:i=>e.deleteSection({sectionId:t.row.sectionId})},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("Delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data"])),[[$,e.isSendingFormEdit]])])),_:1})])}var n=i(180),d=(0,s.aZ)({name:"page-sections",data(){return{isSendingFormAdd:!1,isSendingFormEdit:!1,items:[],nameNewSection:this.$langs("site"),errors:{formAdd:{name:""},formEdit:{}}}},watch:{sections:{deep:!0,immediate:!0,handler(){this.setState()}}},computed:{sections(){let e=(0,n.Z)();return e.$state.items}},methods:{setState(){this.items=this.sections.map((e=>({...e})))},async getSections(){let e=(0,n.Z)(),t=await this.$api["sections"].getSections();e.setSections(t),this.$utils.clearErrors(this.errors.formEdit,this.errors.formEdit)},async createSection(){if(!this.isSendingFormAdd){this.isSendingFormAdd=!0,this.$utils.clearErrors(this.errors.formAdd,this.errors.formAdd);try{await this.$api["sections"].createSection({name:this.nameNewSection}),await this.getSections(),this.nameNewSection=this.$langs("site"),this.$utils.showMessageSuccess({message:this.$t("Added")})}catch(e){let t=this.$utils.setErrors(this.errors.formAdd,e.errors);t||this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isSendingFormAdd=!1}}},async deleteSection({sectionId:e}){if(await this.$utils.showDialogConfirm({title:this.$t("Are you sure you want to delete?")}),!this.isSendingFormEdit){this.isSendingFormEdit=!0;try{await this.$api["sections"].deleteSection({sectionId:+e}),await this.getSections(),this.$utils.showMessageSuccess({message:this.$t("Removed")})}catch(t){this.$utils.showMessageError({message:t.server||t.errors?.section,errors:t})}finally{this.isSendingFormEdit=!1}}},async editSection(e){if(this.isSendingFormEdit)return;this.isSendingFormEdit=!0;let t=`${e.sectionId}_name`;this.$utils.clearErrors(this.errors.formEdit,{[t]:""});try{await this.$api["sections"].editSection(e),await this.getSections(),this.$utils.showMessageSuccess({message:this.$t("Changed")})}catch(i){let e={[t]:i.errors?.name},s=this.$utils.setErrors(this.errors.formEdit,e,!0);s||this.$utils.showMessageError({message:i.server,errors:i})}finally{this.isSendingFormEdit=!1}}}}),m=i(3744);const u=(0,m.Z)(d,[["render",o]]);var c=u}}]);
//# sourceMappingURL=6.b8f00a68.js.map