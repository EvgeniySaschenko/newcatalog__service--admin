"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[733],{4733:function(t,a,e){e.r(a),e.d(a,{default:function(){return m}});var i=e(6252),n=e(3577);const s={class:"page page--ratings container"},o={class:"page__title"},l={class:"u-text-center"},r={class:"u-text-center"},g={key:0},u={class:"u-center u-mt--10"};function p(t,a,e,p,d,c){const w=(0,i.up)("el-button"),h=(0,i.up)("router-link"),m=(0,i.up)("el-tag"),f=(0,i.up)("el-table-column"),$=(0,i.up)("el-text"),b=(0,i.up)("el-table"),k=(0,i.up)("el-pagination");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("h1",o,(0,n.zw)(t.$t(t.$route.name))+" - "+(0,n.zw)(t.$t("Page"))+" "+(0,n.zw)(t.pagination.page),1),(0,i.Wm)(h,{class:"inline-block",to:`${t.pathPage}/create`},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{type:"primary",icon:"el-icon-plus"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.$t("Create a new rating")),1)])),_:1})])),_:1},8,["to"]),(0,i.Wm)(b,{data:t.ratings,stripe:"","scrollbar-always-on":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{label:t.$t("Name")},{default:(0,i.w5)((a=>[(0,i.Wm)(h,{class:"u-m--5",to:`${t.pathPage}/${a.row.ratingId}`},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(a.row.name[t.$langDefault("site")]||`#${a.row.ratingId} - ${t.$langDefault("site")}`),1)])),_:2},1032,["to"]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.row.sectionsIds,(a=>((0,i.wg)(),(0,i.j4)(m,{class:"u-m--5",type:"warning",effect:"plain"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.sectionsMap[a].name[t.$langDefault("site")]),1)])),_:2},1024)))),256))])])),_:1},8,["label"]),(0,i.Wm)(f,{label:t.$t("Hidden"),width:"150"},{default:(0,i.w5)((a=>[a.row.isHiden?((0,i.wg)(),(0,i.j4)(m,{key:0,type:"info",effect:"dark"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.$t("Hidden")),1)])),_:1})):(0,i.kq)("",!0)])),_:1},8,["label"]),(0,i.Wm)(f,{label:t.$t("Date of first publication"),width:"150"},{default:(0,i.w5)((a=>[(0,i._)("div",l,[(0,i._)("div",null,(0,n.zw)(t.$utils.date(a.row.dateFirstPublication)),1),(0,i.Wm)($,{type:"info"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.$utils.time(a.row.dateFirstPublication)),1)])),_:2},1024)])])),_:1},8,["label"]),(0,i.Wm)(f,{label:t.$t("Cache creation date"),width:"150"},{default:(0,i.w5)((a=>[(0,i._)("div",r,[a.row.dateCacheCreation?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",null,(0,n.zw)(t.$utils.date(a.row.dateCacheCreation)),1),(0,i.Wm)($,{type:"info"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.$utils.time(a.row.dateCacheCreation)),1)])),_:2},1024)])):((0,i.wg)(),(0,i.j4)(m,{key:1,class:"u-mb--5",type:"warning",effect:"dark"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.$t("Not published")),1)])),_:1}))])])),_:1},8,["label"])])),_:1},8,["data"]),(0,i._)("div",u,[t.pagination.pagesCount>1?((0,i.wg)(),(0,i.j4)(k,{key:0,"page-size":t.pagination.maxRecordsPerPage,layout:"prev, pager, next",total:t.pagination.itemsCount,background:"",onCurrentChange:a[0]||(a[0]=a=>t.changePage(a)),"current-page":t.pagination.page,"onUpdate:current-page":a[1]||(a[1]=a=>t.pagination.page=a)},null,8,["page-size","total","current-page"])):(0,i.kq)("",!0)])])}e(7658);var d=e(180),c=(0,i.aZ)({name:"page-ratings",data(){return{isLoading:!1,pathPage:window.location.pathname,ratings:[],pagination:{page:1,itemsCount:0,maxRecordsPerPage:0,pagesCount:0},sectionsMap:{}}},mounted(){this.init();let t=(0,d.Z)();for(let a of t.$state.items)this.sectionsMap[a.sectionId]=a},methods:{async init(){let{page:t}=this.$route.query;this.pagination.page=Number(t)||1,await this.getRatings()},async getRatings(){if(!this.isLoading){this.isLoading=!0;try{let{items:t,page:a,itemsCount:e,maxRecordsPerPage:i,pagesCount:n}=await this.$api["ratings"].getRatings({page:this.pagination.page});this.ratings=t,this.pagination={page:a,itemsCount:e,maxRecordsPerPage:i,pagesCount:n}}catch(t){this.$utils.showMessageError({message:t.server,errors:t})}finally{this.isLoading=!1}}},async changePage(t){this.pagination.page=t,this.$router.push({query:{page:t}}),await this.getRatings(),window.scrollTo({top:0,behavior:"smooth"}),this.isLoading=!1}}}),w=e(3744);const h=(0,w.Z)(c,[["render",p]]);var m=h}}]);
//# sourceMappingURL=733.4236c157.js.map