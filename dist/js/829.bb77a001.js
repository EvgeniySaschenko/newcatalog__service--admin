"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[829],{1829:function(e,s,r){r.r(s),r.d(s,{default:function(){return m}});var a=r(6252),t=r(3577),i=r(9963);const o={class:"page page--cache container"},l={class:"page__title"};function d(e,s,r,d,u,n){const p=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),w=(0,a.up)("el-descriptions-item"),h=(0,a.up)("el-button"),c=(0,a.up)("el-form"),g=(0,a.up)("el-descriptions"),f=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("h1",l,(0,t.zw)(e.$t(e.$route.name)),1),(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{class:"form-login","label-position":"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{direction:"vertical",column:2,border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{error:e.errors.email},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{placeholder:"E-mail",modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=s=>e.email=s),style:{width:"100%"},type:"email",autocomplete:"on",name:"email"},null,8,["modelValue"])])),_:1},8,["error"])])),_:1}),(0,a.Wm)(w,{width:"200",align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"primary",onClick:s[1]||(s[1]=s=>e.editEmail())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.$t("Change E-mail")),1)])),_:1})])),_:1}),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{error:e.errors.password,required:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{placeholder:e.$t("Password"),modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=s=>e.password=s),style:{width:"100%"},type:"password",name:"password",autocomplete:"new-password"},null,8,["placeholder","modelValue"])])),_:1},8,["error"]),(0,a.Wm)(m,{error:e.errors.password,required:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{placeholder:e.$t("Repeat password"),modelValue:e.password2,"onUpdate:modelValue":s[3]||(s[3]=s=>e.password2=s),style:{width:"100%"},type:"password",name:"password2",autocomplete:"new-password"},null,8,["placeholder","modelValue"])])),_:1},8,["error"])])),_:1})])),_:1}),(0,a.Wm)(w,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{"native-type":"submit",type:"primary",onClick:s[4]||(s[4]=(0,i.iM)((s=>e.editPassword()),["prevent"]))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.$t("Change password")),1)])),_:1})])),_:1})])),_:1})])),_:1})),[[f,e.isLoading]])])}var u=(0,a.aZ)({name:"page-user",data(){return{isLoading:!1,email:"",password:"",password2:"",errors:{email:"",password:""}}},methods:{async editEmail(){if(!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,this.errors);try{let e=await this.$api["users"].editEmail({email:this.email});if(e)return void this.$utils.showMessageSuccess({message:this.$t("E-mail updated")})}catch(e){let s=this.$utils.setErrors(this.errors,e.errors);s||this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async editPassword(){if(!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,this.errors);try{let e=await this.$api["users"].editPassword({password:this.password,password2:this.password2});if(e)return void this.$utils.showMessageSuccess({message:this.$t("Password updated")})}catch(e){let s=this.$utils.setErrors(this.errors,e.errors);s||this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}}}}),n=r(3744);const p=(0,n.Z)(u,[["render",d]]);var m=p}}]);
//# sourceMappingURL=829.bb77a001.js.map