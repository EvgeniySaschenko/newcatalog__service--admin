"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[212],{3212:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var s=a(6252),i=a(3577);const r={class:"page page--panel-control container"},n={class:"page__title"};function l(e,t,a,l,c,o){const h=(0,s.up)("tab-main"),u=(0,s.up)("el-tab-pane"),g=(0,s.up)("tab-backups-report"),w=(0,s.up)("el-tabs");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("h1",n,(0,i.zw)(e.$t(e.$route.name)),1),(0,s.Wm)(w,{modelValue:e.tabActive,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tabActive=t),onTabChange:t[1]||(t[1]=t=>e.setTabUrlParam()),type:"border-card"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{label:e.$t("Main Settings"),name:e.TabsEnum.main},{default:(0,s.w5)((()=>[e.tabActive==e.TabsEnum.main?((0,s.wg)(),(0,s.j4)(h,{key:0})):(0,s.kq)("",!0)])),_:1},8,["label","name"]),(0,s.Wm)(u,{label:e.$t("Backups report"),name:e.TabsEnum.backupsReport},{default:(0,s.w5)((()=>[e.tabActive==e.TabsEnum.backupsReport?((0,s.wg)(),(0,s.j4)(g,{key:0})):(0,s.kq)("",!0)])),_:1},8,["label","name"])])),_:1},8,["modelValue"])])}a(7658);const c={class:"tab-main"},o={class:"u-mb--10"},h={class:"u-mb--10"},u={class:"u-mb--10"},g={class:"u-mb--10"};function w(e,t,a,r,n,l){const w=(0,s.up)("el-tag"),d=(0,s.up)("el-alert"),p=(0,s.up)("el-descriptions-item"),m=(0,s.up)("el-button"),f=(0,s.up)("el-descriptions"),$=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",o,[(0,s.Wm)(w,{class:"u-mr--10",type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Blocked").toUpperCase()),1)])),_:1}),(0,s._)("span",null,"- "+(0,i.zw)(e.$t("During the execution of the operation, the API service will not process requests")),1)]),(0,s._)("div",h,[(0,s.Wm)(d,{title:e.$t("Creating / deleting a cache implies that these changes will be published on the main website"),type:"warning","show-icon":"",closable:!1},null,8,["title"])]),(0,s._)("div",u,[(0,s.wy)(((0,s.wg)(),(0,s.j4)(f,{direction:"vertical",column:3,border:""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Create cache settings")),1)])),_:1}),(0,s.Wm)(p,{align:"center",width:"100"}),(0,s.Wm)(p,{align:"center",width:"180"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"primary",onClick:t[0]||(t[0]=t=>e.createCacheSettings())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Create cache")),1)])),_:1})])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Create cache sections")),1)])),_:1}),(0,s.Wm)(p,{align:"center",width:"100"}),(0,s.Wm)(p,{align:"center",width:"180"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"primary",onClick:t[1]||(t[1]=t=>e.createCacheSections())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Create cache")),1)])),_:1})])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Rebuild all cache")),1)])),_:1}),(0,s.Wm)(p,{align:"center",width:"100"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Blocked").toUpperCase()),1)])),_:1})])),_:1}),(0,s.Wm)(p,{align:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"primary",onClick:t[2]||(t[2]=t=>e.resetCacheAll())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Create cache")),1)])),_:1})])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Delete all cache")),1)])),_:1}),(0,s.Wm)(p,{align:"center",width:"100"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Blocked").toUpperCase()),1)])),_:1})])),_:1}),(0,s.Wm)(p,{align:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"danger",onClick:t[3]||(t[3]=t=>e.clearCacheAll())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Delete cache")),1)])),_:1})])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Restart screenshots process create")),1)])),_:1}),(0,s.Wm)(p,{align:"center",width:"100"}),(0,s.Wm)(p,{align:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"warning",onClick:t[4]||(t[4]=t=>e.restartScreenshotsProcess())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Restart")),1)])),_:1})])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Restart the process of getting site information")),1)])),_:1}),(0,s.Wm)(p,{align:"center",width:"100"}),(0,s.Wm)(p,{align:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"warning",onClick:t[5]||(t[5]=t=>e.restartSitesProcess())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Restart")),1)])),_:1})])),_:1})])),_:1})),[[$,e.isLoading]])]),(0,s._)("div",g,[(0,s.Wm)(d,{title:e.$t("A backup will be created for: database, images and whois"),type:"warning","show-icon":"",closable:!1},null,8,["title"]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(f,{direction:"vertical",column:3,border:""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Run backup")),1)])),_:1}),(0,s.Wm)(p,{align:"center",width:"100"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Blocked").toUpperCase()),1)])),_:1})])),_:1}),(0,s.Wm)(p,{align:"center",width:"180"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"primary",onClick:t[6]||(t[6]=t=>e.runBackup())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Create backup")),1)])),_:1})])),_:1})])),_:1})),[[$,e.isLoading]])])])}var d=(0,s.aZ)({name:"tab-main",data(){return{isLoading:!1}},methods:{async clearCacheAll(){if(!this.isLoading){await this.$utils.showDialogConfirm({title:this.$t("Delete all cache?")}),this.isLoading=!0;try{let e=await this.$api["cache"].clearCacheAll();if(e)return void this.$utils.showMessageSuccess({message:this.$t("Cache deleted")});throw{server:this.$t("There were errors while creating the cache")}}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async resetCacheAll(){if(!this.isLoading){await this.$utils.showDialogConfirm({title:this.$t("Rebuild all cache?")}),this.isLoading=!0;try{let e=await this.$api["cache"].resetCacheAll();if(e)return void this.$utils.showMessageSuccess({message:this.$t("Cache created")});throw{server:this.$t("There were errors while creating the cache")}}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async createCacheSections(){if(!this.isLoading){await this.$utils.showDialogConfirm({title:this.$t("Create cache for sections?")}),this.isLoading=!0;try{let e=await this.$api["cache"].createCacheSections();if(e)return void this.$utils.showMessageSuccess({message:this.$t("Cache created")});throw{server:this.$t("There were errors while creating the cache")}}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async createCacheSettings(){if(!this.isLoading){await this.$utils.showDialogConfirm({title:this.$t('Create cache "settings" for website?')}),this.isLoading=!0;try{let e=await this.$api["cache"].createCacheSettings();if(e)return void this.$utils.showMessageSuccess({message:this.$t("Cache created")});throw{server:this.$t("There were errors while creating the cache")}}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async runBackup(){if(!this.isLoading){await this.$utils.showDialogConfirm({title:this.$t("Run backup?")}),this.isLoading=!0;try{let e=await this.$api["backups"].runBackup();if(e)return void this.$utils.showMessageSuccess({message:this.$t("Started sending files to a remote server")});throw{server:this.$t("Errors occurred while creating a backup")}}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async restartScreenshotsProcess(){if(!this.isLoading){await this.$utils.showDialogConfirm({title:this.$t("Restart screenshots process create?")}),this.isLoading=!0;try{let e=await this.$api["sites"].restartScreenshotsProcess();if(e)return void this.$utils.showMessageSuccess({message:this.$t("Restarted")})}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async restartSitesProcess(){if(!this.isLoading){await this.$utils.showDialogConfirm({title:this.$t("Restart the process of getting site information?")}),this.isLoading=!0;try{let e=await this.$api["sites"].restartSitesProcess();if(e)return void this.$utils.showMessageSuccess({message:this.$t("Restarted")})}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}}}}),p=a(3744);const m=(0,p.Z)(d,[["render",w]]);var f=m;const $={class:"tab-backups-report"},b={class:"u-center"};function k(e,t,a,r,n,l){const c=(0,s.up)("el-table-column"),o=(0,s.up)("el-tag"),h=(0,s.up)("el-text"),u=(0,s.up)("el-table"),g=(0,s.up)("el-pagination");return(0,s.wg)(),(0,s.iD)("div",$,[(0,s.Wm)(u,{data:e.backups,stripe:"","scrollbar-always-on":!0},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{label:"id",width:"90"},{default:(0,s.w5)((e=>[(0,s._)("span",null,(0,i.zw)(e.row.backupId),1)])),_:1}),(0,s.Wm)(c,{label:e.$t("Status"),width:"120"},{default:(0,s.w5)((t=>[t.row.isError?((0,s.wg)(),(0,s.j4)(o,{key:0,type:"error"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Error").toUpperCase()),1)])),_:1})):t.row.report?((0,s.wg)(),(0,s.j4)(o,{key:2,type:"success"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Ready").toUpperCase()),1)])),_:1})):((0,s.wg)(),(0,s.j4)(o,{key:1,type:"warning"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("In progress").toUpperCase()),1)])),_:1}))])),_:1},8,["label"]),(0,s.Wm)(c,{label:e.$t("Report"),align:"center"},{default:(0,s.w5)((e=>[(0,s._)("span",null,(0,i.zw)(e.row.report),1)])),_:1},8,["label"]),(0,s.Wm)(c,{label:e.$t("Date create"),width:"120",align:"center"},{default:(0,s.w5)((t=>[(0,s._)("div",null,(0,i.zw)(e.$utils.date(t.row.dateCreate)),1),(0,s.Wm)(h,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$utils.time(t.row.dateCreate)),1)])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data"]),(0,s._)("div",b,[e.pagination.pagesCount>1?((0,s.wg)(),(0,s.j4)(g,{key:0,"page-size":e.pagination.maxRecordsPerPage,layout:"prev, pager, next",total:e.pagination.itemsCount,background:"",onCurrentChange:t[0]||(t[0]=t=>e.changePage(t)),"current-page":e.pagination.page,"onUpdate:current-page":t[1]||(t[1]=t=>e.pagination.page=t)},null,8,["page-size","total","current-page"])):(0,s.kq)("",!0)])])}var C=(0,s.aZ)({name:"page-ratings",data(){return{isLoading:!1,backups:[],pagination:{page:1,itemsCount:0,maxRecordsPerPage:0,pagesCount:0}}},mounted(){this.init()},methods:{async init(){await this.getBackups()},async getBackups(){if(!this.isLoading){this.isLoading=!0;try{let e=await this.$api["backups"].getBackups({page:this.pagination.page}),{items:t,page:a,itemsCount:s,maxRecordsPerPage:i,pagesCount:r}=e;this.backups=t,this.pagination={page:a,itemsCount:s,maxRecordsPerPage:i,pagesCount:r}}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async changePage(e){this.pagination.page=e,await this.getBackups(),window.scrollTo({top:0,behavior:"smooth"}),this.isLoading=!1}}});const y=(0,p.Z)(C,[["render",k]]);var _,v=y;(function(e){e["main"]="main",e["backupsReport"]="backupsReport"})(_||(_={}));var W=(0,s.aZ)({name:"page-panel-control",data(){return{tabActive:"",TabsEnum:_}},components:{TabMain:f,TabBackupsReport:v},created(){this.setActiveTab()},methods:{setActiveTab(){let{tab:e}=this.$route.query;this.tabActive=e||_.main},setTabUrlParam(){this.$router.push({query:{tab:[this.tabActive]}})}}});const U=(0,p.Z)(W,[["render",l]]);var z=U}}]);
//# sourceMappingURL=212.1e05faef.js.map