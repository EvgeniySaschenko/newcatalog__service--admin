"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[148],{6148:function(e,t,i){i.r(t),i.d(t,{default:function(){return b}});var s=i(6252),o=i(3577);const a={class:"page page--sections container"},l={class:"page__title"},r={class:"u-text-center"},n={class:"u-text-center"},d={class:"u-text-center"};function c(e,t,i,c,u,g){const h=(0,s.up)("el-button"),m=(0,s.up)("el-table-column"),w=(0,s.up)("el-tag"),p=(0,s.up)("el-table"),$=(0,s.up)("dialog-section"),f=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("h1",l,(0,o.zw)(e.$t(e.$route.name)),1),(0,s.Wm)(h,{type:"primary",onClick:t[0]||(t[0]=t=>e.toggleDialogSection(!0,{}))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("Add a Section")),1)])),_:1}),(0,s.Wm)(p,{data:e.sections,stripe:"","scrollbar-always-on":!0},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{label:"#",type:"index"}),(0,s.Wm)(m,{label:e.$t("Name")},{default:(0,s.w5)((t=>[(0,s._)("div",null,(0,o.zw)(t.row.name[e.$langDefault("site")]),1)])),_:1},8,["label"]),(0,s.Wm)(m,{label:e.$t("Priority"),width:"130"},{default:(0,s.w5)((e=>[(0,s._)("div",r,(0,o.zw)(e.row.priority),1)])),_:1},8,["label"]),(0,s.Wm)(m,{label:e.$t("Hidden"),width:"130"},{default:(0,s.w5)((t=>[(0,s._)("div",n,[t.row.isHiden?((0,s.wg)(),(0,s.j4)(w,{key:0,type:"info",effect:"dark"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("Hidden")),1)])),_:1})):(0,s.kq)("",!0)])])),_:1},8,["label"]),(0,s.Wm)(m,{label:e.$t("Date create"),width:"150"},{default:(0,s.w5)((t=>[(0,s._)("div",d,(0,o.zw)(e.$utils.date(t.row.dateCreate)),1)])),_:1},8,["label"]),(0,s.Wm)(m,{label:e.$t("Edit"),width:"150"},{default:(0,s.w5)((t=>[(0,s.Wm)(h,{type:"primary",onClick:i=>e.toggleDialogSection(!0,t.row)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("Edit")),1)])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])])),[[f,e.isLoading]]),e.isDialogSection?((0,s.wg)(),(0,s.j4)($,{key:0,sectionCurrent:e.sectionCurrent,"onSection:update":t[1]||(t[1]=t=>e.getSections(t)),"onDialog:closed":t[2]||(t[2]=t=>e.toggleDialogSection(!1,{}))},null,8,["sectionCurrent"])):(0,s.kq)("",!0)],64)}var u=i(180);const g={class:"dialog-section__item-name"},h={class:"dialog-section__item-name"};function m(e,t,i,a,l,r){const n=(0,s.up)("el-tag"),d=(0,s.up)("el-input"),c=(0,s.up)("el-form-item"),u=(0,s.up)("el-form"),m=(0,s.up)("el-input-number"),w=(0,s.up)("el-checkbox"),p=(0,s.up)("el-button"),$=(0,s.up)("el-dialog"),f=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.j4)($,{title:e.title,"model-value":!0,onClosed:t[5]||(t[5]=t=>e.$emit("dialog:closed"))},{footer:(0,s.w5)((()=>[e.isEdit?((0,s.wg)(),(0,s.j4)(p,{key:0,type:"danger",onClick:t[2]||(t[2]=t=>e.deleteSection())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("Delete")),1)])),_:1})):(0,s.kq)("",!0),e.isEdit?((0,s.wg)(),(0,s.j4)(p,{key:1,type:"primary",onClick:t[3]||(t[3]=t=>e.editSection())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("Edit")),1)])),_:1})):(0,s.kq)("",!0),e.isEdit?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(p,{key:2,type:"primary",onClick:t[4]||(t[4]=t=>e.createSection())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("Create")),1)])),_:1}))])),default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(u,{class:"dialog-section","label-position":"top"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{error:e.errors.name,label:e.$t("Name")},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$langs("site"),((t,i)=>((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(n,{class:"u-mr--10"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(i),1)])),_:2},1024),(0,s.Wm)(d,{modelValue:e.section.name[i],"onUpdate:modelValue":t=>e.section.name[i]=t},null,8,["modelValue","onUpdate:modelValue"])])))),256))])),_:1},8,["error","label"]),(0,s.Wm)(c,{error:e.errors.descr,label:e.$t("Description")},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$langs("site"),((t,i)=>((0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)(n,{class:"u-mr--10"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(i),1)])),_:2},1024),(0,s.Wm)(d,{modelValue:e.section.descr[i],"onUpdate:modelValue":t=>e.section.descr[i]=t,type:"textarea",rows:2},null,8,["modelValue","onUpdate:modelValue"])])))),256))])),_:1},8,["error","label"])])),_:1})),[[f,e.isLoading]]),(0,s.Wm)(c,{label:e.$t("Priority")},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:e.section.priority,"onUpdate:modelValue":t[0]||(t[0]=t=>e.section.priority=t),size:"small"},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.Wm)(c,{label:e.$t("Hide")},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{modelValue:e.section.isHiden,"onUpdate:modelValue":t[1]||(t[1]=t=>e.section.isHiden=t)},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.Wm)(c,{error:e.errors.section},null,8,["error"])])),_:1},8,["title"])}var w=(0,s.aZ)({name:"dialog-section",emits:["section:update","dialog:closed"],props:{sectionCurrent:{type:Object,default:()=>({})}},data(){return{errors:{name:"",descr:"",section:""},isLoading:!1,section:{name:this.$langs("site"),descr:this.$langs("site"),sectionId:0,priority:0,isHiden:!0},title:"",isEdit:!1}},created(){this.init()},methods:{init(){this.sectionCurrent.sectionId?(this.title=this.$t("Edit a Section"),this.isEdit=!0,Object.assign(this.section,JSON.parse(JSON.stringify(this.sectionCurrent)))):this.title=this.$t("Add a Section")},async createSection(){if(!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,this.errors);try{await this.$api["sections"].createSection(this.section),this.$utils.showMessageSuccess({message:this.$t("Added")}),this.$emit("section:update")}catch(e){let t=this.$utils.setErrors(this.errors,e.errors);t||this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async editSection(){if(!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,this.errors);try{await this.$api["sections"].editSection(this.section),this.$utils.showMessageSuccess({message:this.$t("Changed")}),this.$emit("section:update")}catch(e){let t=this.$utils.setErrors(this.errors,e.errors);t||this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}},async deleteSection(){if(await this.$utils.showDialogConfirm({title:this.$t("Are you sure you want to delete?")}),!this.isLoading){this.isLoading=!0,this.$utils.clearErrors(this.errors,this.errors);try{await this.$api["sections"].deleteSection({sectionId:this.section.sectionId}),this.$utils.showMessageSuccess({message:this.$t("Removed")}),this.$emit("section:update"),this.$emit("dialog:closed")}catch(e){let t=this.$utils.setErrors(this.errors,e.errors);t||this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}}}}}),p=i(3744);const $=(0,p.Z)(w,[["render",m],["__scopeId","data-v-40c904dd"]]);var f=$,y=(0,s.aZ)({name:"page-sections",data(){return{isLoading:!1,sections:[],sectionCurrent:{},isDialogSection:!1}},created(){this.getSections()},components:{DialogSection:f},methods:{async getSections(){this.isLoading=!0;try{let e=await this.$api["sections"].getSections(),t=(0,u.Z)();t.setSections(e),this.sections=e}catch(e){this.$utils.showMessageError({message:e.server,errors:e})}finally{this.isLoading=!1}},toggleDialogSection(e,t){this.sectionCurrent=t,this.isDialogSection=e}}});const _=(0,p.Z)(y,[["render",c]]);var b=_}}]);
//# sourceMappingURL=148.96bf346c.js.map